# ============================================
# Kubernetes Secrets for Sensitive Data
# Best Practices: Base64 encoded, RBAC protected
# NOTE: In production, use external secret managers like:
#   - AWS Secrets Manager
#   - HashiCorp Vault
#   - Azure Key Vault
#   - Sealed Secrets
# ============================================

---
# Development Secrets
apiVersion: v1
kind: Secret
metadata:
  name: app-secrets
  namespace: dev
  labels:
    app: node-redis-mongo
    environment: development
  annotations:
    description: "Secrets for Node.js application in development"
type: Opaque
# Base64 encoded values (echo -n 'value' | base64)
data:
  # MongoDB Database Name: library_dev
  MONGO_DB_NAME: bGlicmFyeV9kZXY=
  
  # MongoDB credentials (for when using authenticated MongoDB)
  # MONGO_USERNAME: ZGV2X3VzZXI=
  # MONGO_PASSWORD: ZGV2X3Bhc3N3b3Jk
  
  # Redis password (if using authenticated Redis)
  # REDIS_PASSWORD: cmVkaXNfcGFzc3dvcmQ=
  
  # JWT Secret for authentication (if implemented)
  # JWT_SECRET: bXlfc3VwZXJfc2VjcmV0X2tleV9mb3JfZGV2ZWxvcG1lbnQ=
  
  # API Keys (if needed)
  # API_KEY: ZGV2X2FwaV9rZXlfMTIzNDU2

---
# Production Secrets
apiVersion: v1
kind: Secret
metadata:
  name: app-secrets
  namespace: prod
  labels:
    app: node-redis-mongo
    environment: production
  annotations:
    description: "Secrets for Node.js application in production"
type: Opaque
# Base64 encoded values (echo -n 'value' | base64)
# IMPORTANT: Replace these with real production secrets!
data:
  # MongoDB Database Name: library_prod
  MONGO_DB_NAME: bGlicmFyeV9wcm9k
  
  # MongoDB credentials (REQUIRED in production)
  # MONGO_USERNAME: cHJvZF91c2Vy
  # MONGO_PASSWORD: c3Ryb25nX3Byb2RfcGFzc3dvcmQ=
  
  # Redis password (REQUIRED in production)
  # REDIS_PASSWORD: c3Ryb25nX3JlZGlzX3Bhc3N3b3Jk
  
  # JWT Secret for authentication
  # JWT_SECRET: cHJvZHVjdGlvbl9zZWNyZXRfa2V5X3ZlcnlfbG9uZ19hbmRfc2VjdXJl
  
  # API Keys
  # API_KEY: cHJvZF9hcGlfa2V5XzEyMzQ1Ng==

---
# Docker Registry Secret (for pulling private images)
apiVersion: v1
kind: Secret
metadata:
  name: docker-registry-secret
  namespace: dev
  labels:
    app: node-redis-mongo
type: kubernetes.io/dockerconfigjson
data:
  # This should contain your Docker registry credentials
  # Generate with: kubectl create secret docker-registry docker-registry-secret \
  #   --docker-server=ghcr.io \
  #   --docker-username=<username> \
  #   --docker-password=<token> \
  #   --dry-run=client -o yaml
  .dockerconfigjson: e30=

---
# Docker Registry Secret for Production
apiVersion: v1
kind: Secret
metadata:
  name: docker-registry-secret
  namespace: prod
  labels:
    app: node-redis-mongo
type: kubernetes.io/dockerconfigjson
data:
  .dockerconfigjson: e30=

---
# TLS Secret Template (for HTTPS/Ingress)
# Uncomment and configure when you have SSL certificates
# apiVersion: v1
# kind: Secret
# metadata:
#   name: tls-secret
#   namespace: prod
# type: kubernetes.io/tls
# data:
#   tls.crt: <base64-encoded-certificate>
#   tls.key: <base64-encoded-private-key>
