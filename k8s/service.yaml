# ============================================
# Application Service - Exposes the Node.js app
# Best Practices: Labels, Named ports
# ============================================
apiVersion: v1
kind: Service
metadata:
  name: node-redis-mongo-app
  labels:
    app: node-redis-mongo
    component: backend
    tier: application
  annotations:
    description: "Service for Node.js application"
spec:
  type: NodePort
  selector:
    app: node-redis-mongo
    component: backend
  ports:
    - name: http
      port: 80
      targetPort: 5000
      nodePort: 30500
      protocol: TCP

---
# ClusterIP Service (for internal access only)
apiVersion: v1
kind: Service
metadata:
  name: node-redis-mongo-app-internal
  labels:
    app: node-redis-mongo
    component: backend
spec:
  type: ClusterIP
  selector:
    app: node-redis-mongo
    component: backend
  ports:
    - name: http
      port: 5000
      targetPort: 5000
      protocol: TCP

